<p-dialog [(visible)]="visible" [modal]="true" [closable]="true" [style]="{ width: '500px' }" [draggable]="false"
    [resizable]="false" (onHide)="onHide()" styleClass="confirmation-dialog">
    <ng-template pTemplate="header">
        <div class="flex items-center gap-3">
            <div class="w-10 h-10 bg-emerald-100 rounded-full flex items-center justify-center">
                <lucide-icon [img]="CheckCircle" class="text-emerald-600" [size]="24"></lucide-icon>
            </div>
            <h3 class="text-xl font-bold text-slate-800">Booking Confirmed!</h3>
        </div>
    </ng-template>

    <div class="py-4 px-2" *ngIf="booking">
        <p class="text-slate-600 mb-6 text-center text-lg">
            Your journey is confirmed! Here are your ticket details.
        </p>

        <div class="ticket-container">
            <div class="ticket-header">
                <div>
                    <span class="ticket-label block">Booking ID</span>
                    <span class="font-mono font-bold text-slate-800 text-lg">{{ booking.id }}</span>
                </div>
                <!-- Placeholder for QR or other graphic -->
                <lucide-icon [img]="CheckCircle" class="text-emerald-500 opacity-20" [size]="48"></lucide-icon>
            </div>

            <div class="ticket-body">
                <!-- Travel Date -->
                <div class="ticket-row border-b border-slate-100 pb-3 mb-3">
                    <span class="ticket-label">Travel Date</span>
                    <span class="ticket-value">{{ booking.travelDate | date:'fullDate' }}</span>
                </div>

                <!-- Mobile -->
                <div class="ticket-row border-b border-slate-100 pb-3 mb-3">
                    <span class="ticket-label">Mobile Number</span>
                    <span class="ticket-value">+91 {{ booking.mobileNumber }}</span>
                </div>

                <!-- Seats -->
                <div class="mb-4">
                    <span class="ticket-label block mb-2">Selected Seats</span>
                    <div class="flex flex-wrap gap-2">
                        <span *ngFor="let seat of booking.seats"
                            class="px-3 py-1 bg-red-50 text-red-600 border border-red-100 rounded text-sm font-bold shadow-sm">
                            {{ seat }}
                        </span>
                    </div>
                </div>

                <!-- Total Amount (if available) -->
                <div *ngIf="booking.totalAmount"
                    class="ticket-row bg-slate-50 -mx-6 -mb-6 px-6 py-4 mt-4 border-t border-slate-100 items-center">
                    <span class="ticket-label text-slate-700">Total Amount</span>
                    <span class="ticket-price">â‚¹{{ booking.totalAmount }}</span>
                </div>
            </div>
        </div>
    </div>

    <ng-template pTemplate="footer">
        <div class="flex gap-3">
            <p-button label="Book Another" icon="pi pi-plus" (onClick)="onBookAnother()"
                styleClass="flex-1 btbs-custom-modal-btn" [outlined]="true" />
            <p-button label="Close" icon="pi pi-times" (onClick)="onHide()" styleClass="flex-1 btbs-custom-modal-btn" />
        </div>
    </ng-template>
</p-dialog>